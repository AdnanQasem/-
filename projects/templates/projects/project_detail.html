{% extends "base.html" %}
{% load static %}

{% block title %}{{ project.title }} - سهمك{% endblock %}

{% block content %}
<section style="padding:110px 0; background:linear-gradient(135deg,#f5f7fb,#eef3ff);">
    <div class="container">
        <div style="
            max-width:1100px; 
            margin:auto; 
            background:white; 
            border-radius:26px; 
            overflow:hidden; 
            box-shadow:0 25px 70px rgba(15,23,42,0.15);
            border:1px solid rgba(226,232,240,0.9);
        ">
            <!-- صورة المشروع -->
            <div style="height:420px; overflow:hidden; position:relative;">
                {% if project.image %}
                    <img src="{{ project.image.url }}" alt="{{ project.title }}" style="width:100%; height:100%; object-fit:cover;">
                {% else %}
                    <div style="height:420px; background:linear-gradient(135deg,#0d6efd,#764ba2); display:flex; align-items:center; justify-content:center; color:white; font-size:4rem; font-weight:bold; letter-spacing:4px;">
                        {{ project.title|slice:":2"|upper }}
                    </div>
                {% endif %}
                <!-- شارة مميزة أعلى الصورة -->
                <span style="
                    position:absolute;
                    top:20px;
                    left:20px;
                    background:rgba(15,23,42,0.85);
                    color:#e5f9ff;
                    padding:8px 18px;
                    border-radius:999px;
                    font-size:0.95rem;
                    display:flex;
                    align-items:center;
                    gap:8px;
                    backdrop-filter:blur(6px);
                ">
                    <i class="fas fa-chart-line"></i>
                    فرصة استثمارية
                </span>
            </div>

            <div style="padding:45px 35px 40px;">
                <!-- عنوان المشروع -->
                <div style="text-align:center; margin-bottom:30px;">
                    <div style="
                        display:inline-flex;
                        align-items:center;
                        gap:10px;
                        padding:6px 16px;
                        border-radius:999px;
                        background:rgba(13,110,253,0.06);
                        color:#2563eb;
                        font-size:0.95rem;
                        margin-bottom:14px;
                    ">
                        <span style="width:9px; height:9px; border-radius:50%; background:#22c55e;"></span>
                        مشروع متاح للاستثمار
                    </div>
                    <h1 style="
                        font-size:2.4rem; 
                        color:#0f172a; 
                        margin-bottom:10px;
                        line-height:1.3;
                    ">
                        {{ project.title }}
                    </h1>
                    <div style="width:90px; height:3px; border-radius:999px; margin:12px auto 0; background:linear-gradient(90deg,#0d6efd,#22c55e);"></div>
                </div>

                <!-- قسم وصف المشروع -->
                <div style="
                    margin-bottom:35px;
                    padding:22px 24px;
                    border-radius:20px;
                    background:linear-gradient(135deg,#f8fafc,#f1f5f9);
                    border:1px solid #e2e8f0;
                ">
                    <div style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
                        <div style="
                            width:32px;
                            height:32px;
                            border-radius:12px;
                            background:rgba(37,99,235,0.08);
                            display:flex;
                            align-items:center;
                            justify-content:center;
                            font-size:0.9rem;
                            color:#2563eb;
                        ">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <h2 style="font-size:1.2rem; color:#0f172a; margin:0;">
                            وصف المشروع
                        </h2>
                    </div>
                    <p style="font-size:1.02rem; color:#4b5563; line-height:1.9; margin:0;">
                        {{ project.description }}
                    </p>
                </div>

                <!-- الأرقام -->
                <div style="
                    display:grid; 
                    grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); 
                    gap:18px; 
                    margin:25px 0 35px;
                    text-align:center;
                ">
                    <div style="
                        background:#f9fafb; 
                        padding:22px 18px; 
                        border-radius:18px;
                        border:1px solid #e5e7eb;
                    ">
                        <p style="margin:0; font-size:0.95rem; color:#6b7280; margin-bottom:8px;">المبلغ المطلوب</p>
                        <h3 style="color:#0d6efd; font-size:1.6rem; margin:0 0 4px;">
                            {{ project.goal_amount }} ₪
                        </h3>
                    </div>
                    <div style="
                        background:#f9fafb; 
                        padding:22px 18px; 
                        border-radius:18px;
                        border:1px solid #e5e7eb;
                    ">
                        <p style="margin:0; font-size:0.95rem; color:#6b7280; margin-bottom:8px;">تم جمع</p>
                        <h3 style="color:#16a34a; font-size:1.6rem; margin:0 0 4px;">
                            {{ project.raised_amount }} ₪
                        </h3>
                    </div>
                    <div style="
                        background:#f9fafb; 
                        padding:22px 18px; 
                        border-radius:18px;
                        border:1px solid #e5e7eb;
                    ">
                        <p style="margin:0; font-size:0.95rem; color:#6b7280; margin-bottom:8px;">نسبة الإنجاز</p>
                        <h3 style="color:#f59e0b; font-size:1.6rem; margin:0 0 8px;">
                            {{ project.progress }}%
                        </h3>
                        <div style="
                            width:100%;
                            height:8px;
                            border-radius:999px;
                            background:#e5e7eb;
                            overflow:hidden;
                        ">
                            <div style="
                                width:{{ project.progress }}%;
                                max-width:100%;
                                height:100%;
                                background:linear-gradient(90deg,#22c55e,#0d6efd);
                            "></div>
                        </div>
                    </div>
                </div>

                <!-- زر الاستثمار الأنيق -->
                <div style="text-align:center; margin:40px 0 35px;">
                    <a href="{% url 'projects:payment' project.id %}" 
                       style="
                            display:inline-flex; 
                            align-items:center; 
                            justify-content:center;
                            gap:10px;
                            padding:20px 70px; 
                            background:linear-gradient(135deg,#22c55e,#0fb88b); 
                            color:white; 
                            border-radius:999px; 
                            font-size:1.25rem; 
                            font-weight:800; 
                            text-decoration:none; 
                            box-shadow:0 20px 40px rgba(16,185,129,0.45); 
                            transition:transform 0.25s ease, box-shadow 0.25s ease, filter 0.25s ease;
                       "
                       onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 26px 60px rgba(16,185,129,0.55)'; this.style.filter='brightness(1.05)'"
                       onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(16,185,129,0.45)'; this.style.filter='brightness(1)'">
                        <i class="fas fa-seedling" style="font-size:1.2rem;"></i>
                        استثمر الآن
                    </a>
                    <p style="margin-top:10px; font-size:0.9rem; color:#6b7280;">
                        شارك في تمويل مشروع حقيقي يُسهم في تنمية الاقتصاد المحلي
                    </p>
                </div>

                <!-- قسم تحذير الاستثمار -->
                <div style="
                    margin:10px 0 28px;
                    padding:18px 20px;
                    border-radius:18px;
                    background:linear-gradient(135deg,#fff7ed,#fffbeb);
                    border:1px solid #fed7aa;
                    display:flex;
                    gap:14px;
                    align-items:flex-start;
                ">
                    <div style="
                        width:32px;
                        height:32px;
                        border-radius:999px;
                        background:#f97316;
                        display:flex;
                        align-items:center;
                        justify-content:center;
                        color:white;
                        font-weight:700;
                        flex-shrink:0;
                    ">
                        !
                    </div>
                    <div>
                        <h3 style="margin:0 0 6px; font-size:1rem; color:#9a3412;">
                            تحذير استثماري
                        </h3>
                        <p style="margin:0; font-size:0.95rem; color:#7c2d12; line-height:1.8;">
                            الاستثمار في المشاريع ينطوي على مخاطر. قد تحصل على أرباح أو قد تخسر جزءاً من رأس المال.
                            يرجى القراءة الجيدة قبل اتخاذ قرار الاستثمار.
                        </p>
                    </div>
                </div>

                <!-- معلومات المالك والتاريخ -->
                <div style="text-align:center; color:#9ca3af; font-size:0.95rem; border-top:1px dashed #e5e7eb; padding-top:16px;">
                    <p style="margin:0;">
                        بواسطة: <strong style="color:#4b5563;">{{ project.owner.username }}</strong> 
                        • تاريخ الإنشاء: {{ project.created_at|date:"d/m/Y" }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
